(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{8086:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return t(4264)}])},4759:function(n,e,t){"use strict";t.d(e,{C:function(){return x},Z:function(){return h}});var r=t(2729),i=t(5893),o=t(508);function u(){let n=(0,r._)(["\n        background-color: #fff;\n        color: #000;\n    "]);return u=function(){return n},n}function c(){let n=(0,r._)(["\n    background-color: transparent;\n    color: #fff;\n    border: 1px solid #fff;\n    "]);return c=function(){return n},n}function l(){let n=(0,r._)(["\n        background-color: #5542F6;\n        color: #fff;\n        border: 1px solid #5542F6;\n    "]);return l=function(){return n},n}function a(){let n=(0,r._)(["\n        font-size:1.2rem;\n        padding: 10px 20px;\n        svg{\n            height: 20px;\n        }\n    "]);return a=function(){return n},n}function d(){let n=(0,r._)(["\n        display: block;\n        width: 100%;\n    "]);return d=function(){return n},n}function s(){let n=(0,r._)(["\n    border: 0;\n    color: #fff;\n    padding: 5px 15px;\n    border-radius: 5px;\n    cursor: pointer;\n    display: inline-flex;\n    align-items: center;\n    text-decoration: none;\n    svg {\n        height: 16px;\n        margin-right: 5px;\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return s=function(){return n},n}function f(){let n=(0,r._)(["\n   ","\n"]);return f=function(){return n},n}let h=(0,o.iv)(s(),n=>n.white&&!n.outline&&(0,o.iv)(u()),n=>n.white&&n.outline&&(0,o.iv)(c()),n=>n.primary&&(0,o.iv)(l()),n=>"l"===n.size&&(0,o.iv)(a()),n=>n.block&&(0,o.iv)(d())),p=o.ZP.button.withConfig({componentId:"sc-5935a2f0-0"})(f(),h);function x(n){let{children:e,...t}=n;return(0,i.jsx)(p,{...t,children:e})}},2758:function(n,e,t){"use strict";t.d(e,{Z:function(){return l}});var r=t(2729),i=t(5893),o=t(508);function u(){let n=(0,r._)(["\n    max-width: 800px;\n    margin: 0 auto;\n    padding: 0 20px;\n"]);return u=function(){return n},n}let c=o.ZP.div.withConfig({componentId:"sc-1c8a5dad-0"})(u());function l(n){let{children:e}=n;return(0,i.jsx)(c,{children:e})}},5221:function(n,e,t){"use strict";t.d(e,{Z:function(){return D}});var r=t(2729),i=t(5893),o=t(1664),u=t.n(o),c=t(508),l=t(2758),a=t(7294),d=t(8551);function s(){let n=(0,r._)(["\n    background-color: #222;\n"]);return s=function(){return n},n}function f(){let n=(0,r._)(["\n    color: #fff;\n    text-decoration: none;\n"]);return f=function(){return n},n}function h(){let n=(0,r._)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 20px 0;\n"]);return h=function(){return n},n}function p(){let n=(0,r._)(["\n    display: flex;\n    gap: 15px;\n"]);return p=function(){return n},n}function x(){let n=(0,r._)(["\n    color: #aaa;\n    text-decoration: none;\n"]);return x=function(){return n},n}let g=c.ZP.header.withConfig({componentId:"sc-19b6f83c-0"})(s()),m=(0,c.ZP)(u()).withConfig({componentId:"sc-19b6f83c-1"})(f()),C=c.ZP.div.withConfig({componentId:"sc-19b6f83c-2"})(h()),j=c.ZP.nav.withConfig({componentId:"sc-19b6f83c-3"})(p()),v=(0,c.ZP)(u()).withConfig({componentId:"sc-19b6f83c-4"})(x());function D(){let{cartProducts:n}=(0,a.useContext)(d.A);return(0,i.jsx)(g,{children:(0,i.jsx)(l.Z,{children:(0,i.jsxs)(C,{children:[(0,i.jsx)(m,{href:"/",children:"Ecommerce"}),(0,i.jsxs)(j,{children:[(0,i.jsx)(v,{href:"/",children:"Home"}),(0,i.jsx)(v,{href:"/products",children:"All products"}),(0,i.jsxs)(v,{href:"/cart",children:["Cart (",n.length,")"]})]})]})})})}},4264:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return H}});var r=t(2729),i=t(5893),o=t(4759),u=t(2758),c=t(5221),l=t(508),a=t(7294),d=t(8551),s=t(6154);function f(){let n=(0,r._)(["\n    width: 100%;\n    th {\n        text-align: left;\n        text-transform: uppercase;\n        color: #ccc;\n        font-weight: 600;\n        font-size: .7rem;\n    } \n    td {\n        border-top: 1px solid rgba(0,0,0,0.1);\n    }\n"]);return f=function(){return n},n}let h=l.ZP.table.withConfig({componentId:"sc-f559b562-0"})(f());function p(n){return(0,i.jsx)(h,{...n})}function x(){let n=(0,r._)(["\n    width: 100%;\n    padding: 5px;\n    margin-bottom: 5px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    box-sizing: border-box;\n"]);return x=function(){return n},n}let g=l.ZP.input.withConfig({componentId:"sc-3e19ca23-0"})(x());function m(n){return(0,i.jsx)(g,{...n})}var C=t(1163),j=t(5247);j.ZP.init("kVPiWt2jPqDAaEXsb");let v=n=>{j.ZP.send("service_hol146a","template_tlf37dw",n).then(n=>{console.log(n.text)},n=>{console.log(n.text)})};function D(){let n=(0,r._)(["\n    width: 100%;\n    padding: 5px;\n    margin-bottom: 5px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    box-sizing: border-box;\n"]);return D=function(){return n},n}function y(){let n=(0,r._)(["\n    display: grid;\n    grid-template-columns: 1.2fr 0.8fr;\n    gap: 40px;\n    margin-top: 40px;\n"]);return y=function(){return n},n}function b(){let n=(0,r._)(["\n    background-color: #fff;\n    border-radius: 10px;\n    padding: 30px;\n"]);return b=function(){return n},n}function w(){let n=(0,r._)(["\n    padding: 10px 0;\n"]);return w=function(){return n},n}function _(){let n=(0,r._)(["\n    width: 100px;\n    height: 100px;\n    padding: 10px;\n    border: 1px solid rgba(0,0,0,0.1);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 10px;\n    img {\n        max-width: 80px;\n        max-height: 80px;\n    }\n"]);return _=function(){return n},n}function P(){let n=(0,r._)(["\n    padding: 0 3px;\n"]);return P=function(){return n},n}let S=l.ZP.select.withConfig({componentId:"sc-4e20cf77-0"})(D()),Z=l.ZP.div.withConfig({componentId:"sc-4e20cf77-1"})(y()),k=l.ZP.div.withConfig({componentId:"sc-4e20cf77-2"})(b()),I=l.ZP.td.withConfig({componentId:"sc-4e20cf77-3"})(w()),E=l.ZP.div.withConfig({componentId:"sc-4e20cf77-4"})(_()),T=l.ZP.span.withConfig({componentId:"sc-4e20cf77-5"})(P());function H(){let{cartProducts:n,addProduct:e,removeProduct:t,clearCart:r}=(0,a.useContext)(d.A),[l,f]=(0,a.useState)([]),[h,x]=(0,a.useState)(""),[g,j]=(0,a.useState)(""),[D,y]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),[_,P]=(0,a.useState)(""),H=(0,C.useRouter)();async function N(){if(""===h||""===g||""===D||""===b||""===_){document.getElementById("error").innerHTML="Please fill all fields";return}let e=await s.Z.post("/api/checkout",{name:h,email:g,phone:D,pickupLocation:b,paymentMethod:_,cartProducts:n});var t={to_name:h,to_email:g,amount:q,pickupLocation:function(){if("Richmond"===b)return"Richmond：Ironwood Canadian Tire 停車場\uD83D\uDCCD11388 Steveston Hwy";if("Burnaby"===b)return"Burnaby: Wholesale Club 停車場 (舊Safeway旁邊）\uD83D\uDCCD5335  Kingsway";if("Vancouver"===b);else if("North Surrey"===b)return"North Surrey: T&T 停車場\uD83D\uDCCD15277 100 AVE";else if("South Surrey"===b)return"South Surrey: South Point Canadian Tire 停車場\uD83D\uDCCD3059 152 Street";else if("Langley"===b)return"Langley: H-Mart 停車場\uD83D\uDCCD19555 Fraser Hwy";else if("Coquitlam"===b)return"Coquitlam: Coquilam Centre Walmart 停車場\uD83D\uDCCD2929 Barnet Hwy"}(),paymentMethod:_,order:e.data.line_items.map(n=>n.price_data.product_data.name+" x "+n.quantity).join("\n")};e.data&&(r(),v(t),H.push("/success"))}(0,a.useEffect)(()=>{n.length>0?s.Z.post("/api/cart",{ids:n}).then(n=>{f(n.data)}):f([])},[n]);let q=0;for(let e of n){var B;let n=(null===(B=l.find(n=>n._id===e))||void 0===B?void 0:B.price)||0;q+=n}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{}),(0,i.jsx)(u.Z,{children:(0,i.jsxs)(Z,{children:[(0,i.jsxs)(k,{children:[(0,i.jsx)("h2",{children:"Cart"}),!(null==n?void 0:n.length)&&(0,i.jsx)("div",{children:"Your cart is empty"}),(null==l?void 0:l.length)>0&&(0,i.jsxs)(p,{children:[(0,i.jsxs)("thead",{children:[(0,i.jsx)("th",{children:"Product"}),(0,i.jsx)("th",{children:"Quantity"}),(0,i.jsx)("th",{children:"Price"})]}),(0,i.jsxs)("tbody",{children:[l.map(r=>(0,i.jsxs)("tr",{children:[(0,i.jsxs)(I,{children:[(0,i.jsx)(E,{children:(0,i.jsx)("img",{src:r.images[0],alt:""})}),r.title]}),(0,i.jsxs)("td",{children:[(0,i.jsx)(o.C,{onClick:()=>{t(r._id)},primary:!0,children:"-"}),(0,i.jsx)(T,{children:n.filter(n=>n===r._id).length}),(0,i.jsx)(o.C,{onClick:()=>{e(r._id)},primary:!0,children:"+"})]}),(0,i.jsxs)("td",{children:["$",n.filter(n=>n===r._id).length*r.price]})]},r._id)),(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{}),(0,i.jsx)("td",{}),(0,i.jsxs)("td",{children:["$",q]})]})]})]})]}),!!(null==n?void 0:n.length)&&(0,i.jsxs)(k,{children:[(0,i.jsx)("h2",{children:"Order Information"}),(0,i.jsx)(m,{type:"text",name:"name",placeholder:"Name",value:h,onChange:n=>x(n.target.value),required:!0}),(0,i.jsx)(m,{type:"text",name:"email",placeholder:"Email",value:g,onChange:n=>j(n.target.value)}),(0,i.jsx)(m,{type:"text",name:"phone",placeholder:"Phone",value:D,onChange:n=>y(n.target.value)}),(0,i.jsxs)(S,{value:b,onChange:n=>w(n.target.value),children:[(0,i.jsx)("option",{value:"0",children:"Pickup Location: "}),(0,i.jsx)("option",{value:"Richmond",children:"Richmond：Ironwood Canadian Tire 停車場\uD83D\uDCCD11388 Steveston Hwy"}),(0,i.jsx)("option",{value:"Burnaby",children:"Burnaby: Wholesale Club 停車場 (舊Safeway旁邊）\uD83D\uDCCD5335  Kingsway"}),(0,i.jsx)("option",{value:"Vancouver",children:"Vancouver: Oakridge Mall對面TD Bank 停車場\uD83D\uDCCD511 WEST 41 AVE"}),(0,i.jsx)("option",{value:"North Surrey",children:" North Surrey: T&T 停車場\uD83D\uDCCD15277 100 AVE"}),(0,i.jsx)("option",{value:"South Surrey",children:" South Surrey: South Point Canadian Tire 停車場\uD83D\uDCCD3059 152 Street"}),(0,i.jsx)("option",{value:"Langley",children:" Langley: H-Mart 停車場\uD83D\uDCCD19555 Fraser Hwy"}),(0,i.jsx)("option",{value:"Coquitlam",children:" Coquitlam: Coquilam Centre Walmart 停車場\uD83D\uDCCD2929 Barnet Hwy"})]}),(0,i.jsxs)(S,{value:_,onChange:n=>P(n.target.value),children:[(0,i.jsx)("option",{value:"0",children:"Payment Method: "}),(0,i.jsx)("option",{value:"Cash",children:"Cash"}),(0,i.jsx)("option",{value:"Etransfer",children:"Etransfer"})]}),(0,i.jsx)("div",{id:"error",style:{color:"red"}}),(0,i.jsx)(o.C,{primary:!0,block:!0,onClick:N,children:"Continue to payment"})]})]})})]})}}},function(n){n.O(0,[664,615,774,888,179],function(){return n(n.s=8086)}),_N_E=n.O()}]);