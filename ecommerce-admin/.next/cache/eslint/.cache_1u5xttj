[{"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\auth\\[...nextauth].js":"1","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\categories.js":"2","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\orders.js":"3","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\products.js":"4","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\upload.js":"5","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\categories.js":"6","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\index.js":"7","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\orders.js":"8","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products\\delete\\[...id].js":"9","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products\\edit\\[...id].js":"10","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products\\new.js":"11","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products.js":"12","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\_app.js":"13","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\components\\Layout.js":"14","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\components\\Nav.js":"15","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\components\\ProductForm.js":"16","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\lib\\mongodb.js":"17","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\lib\\mongoose.js":"18"},{"size":998,"mtime":1687980279353,"results":"19","hashOfConfig":"20"},{"size":1109,"mtime":1686439470466,"results":"21","hashOfConfig":"20"},{"size":519,"mtime":1687136896693,"results":"22","hashOfConfig":"20"},{"size":1220,"mtime":1686439492706,"results":"23","hashOfConfig":"20"},{"size":1569,"mtime":1686530069979,"results":"24","hashOfConfig":"20"},{"size":8139,"mtime":1687981259283,"results":"25","hashOfConfig":"20"},{"size":571,"mtime":1686089297263,"results":"26","hashOfConfig":"20"},{"size":2432,"mtime":1687982147856,"results":"27","hashOfConfig":"20"},{"size":1133,"mtime":1687980609022,"results":"28","hashOfConfig":"20"},{"size":795,"mtime":1687131360294,"results":"29","hashOfConfig":"20"},{"size":261,"mtime":1686096788651,"results":"30","hashOfConfig":"20"},{"size":2745,"mtime":1687983038173,"results":"31","hashOfConfig":"20"},{"size":300,"mtime":1686085605548,"results":"32","hashOfConfig":"20"},{"size":722,"mtime":1686088759403,"results":"33","hashOfConfig":"20"},{"size":6207,"mtime":1687983122162,"results":"34","hashOfConfig":"20"},{"size":6127,"mtime":1687981715261,"results":"35","hashOfConfig":"20"},{"size":1054,"mtime":1686086553781,"results":"36","hashOfConfig":"20"},{"size":278,"mtime":1686092943987,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"tm8fkr",{"filePath":"41","messages":"42","suppressedMessages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59"},{"filePath":"60","messages":"61","suppressedMessages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"63","messages":"64","suppressedMessages":"65","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","suppressedMessages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","suppressedMessages":"71","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","suppressedMessages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"75","messages":"76","suppressedMessages":"77","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","suppressedMessages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","suppressedMessages":"83","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"84","messages":"85","suppressedMessages":"86","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87"},{"filePath":"88","messages":"89","suppressedMessages":"90","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","suppressedMessages":"93","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\auth\\[...nextauth].js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\categories.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\orders.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\products.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\api\\upload.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\categories.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\index.js",["94"],[],"import Layout from '@/components/Layout.js';\nimport {useSession} from \"next-auth/react\";\n\nexport default function Home() {\n  const { data: session} = useSession();\n\n  return <Layout>\n    <div className=\"text-blue-900 flex justify-between\">\n      <h2>\n        Hello, {session?.user?.name}\n      </h2>\n      <div className=\"flex bg-gray-300 gap-1 text-black rounded-lg overflow-hidden\">\n        <img src={session?.user?.image} alt=\"\" className=\"w-6 h-6\"/>\n        <span className=\"px-2\">\n          {session?.user?.name}\n        </span>\n      </div>\n    </div>\n  </Layout>\n}","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\orders.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products\\delete\\[...id].js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products\\edit\\[...id].js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products\\new.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\products.js",["95","96"],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\pages\\_app.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\components\\Layout.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\components\\Nav.js",["97","98","99","100","101","102"],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\components\\ProductForm.js",["103"],[],"import {useState, useEffect} from \"react\";\r\nimport {useRouter} from \"next/router\";\r\nimport axios from \"axios\";\r\nimport {ReactSortable} from 'react-sortablejs';\r\n\r\nexport default function ProductForm({\r\n        _id,\r\n        title:existingTitle, \r\n        description:existingDescription, \r\n        price:existingPrice,\r\n        images:existingImages,\r\n        category: assignedCategory,\r\n        properties: assignedProperties,\r\n    }) {\r\n    const [images, setImages] = useState(existingImages || []);\r\n    const [title, setTitle] = useState(existingTitle || '');\r\n    const [description, setDescription] = useState(existingDescription || '');\r\n    const [price, setPrice] = useState(existingPrice || '');\r\n    const [goToProducts, setGoToProducts] = useState(false);\r\n    const [categories, setCategories] = useState([]); \r\n    const [category, setCategory] = useState(assignedCategory || ''); \r\n    const [productProperties, setProductProperties] = useState(assignedProperties || {});\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        axios.get('/api/categories').then(result => {\r\n            setCategories(result.data);\r\n        })\r\n    }, []);\r\n\r\n    async function saveProduct(ev) {\r\n        ev.preventDefault();\r\n        const data = {title, description, price, images, category, properties:productProperties};\r\n        if(_id) {\r\n            //update\r\n            await axios.put('/api/products' , {...data, _id});\r\n        } else {\r\n            //create\r\n            await axios.post('/api/products', data);\r\n        }\r\n        setGoToProducts(true);\r\n    }\r\n\r\n    if(goToProducts) {\r\n        router.push('/products')\r\n    }\r\n\r\n    async function uploadImages(ev) {\r\n        const files = ev.target?.files;\r\n        if(files?.length > 0) {\r\n            const data = new FormData();\r\n            for(const file of files) {\r\n                data.append('file', file);\r\n            }\r\n            const res = await axios.post('/api/upload', data);\r\n            setImages(oldImages => {\r\n                return [...oldImages, ...res.data.links];\r\n            });\r\n        }\r\n    }\r\n\r\n    function updateImagesOrder(images) {\r\n        setImages(images);\r\n    }\r\n\r\n    function setProductProperty(propName, value) {\r\n        setProductProperties(prev => {\r\n            const newProductProperties = {...prev};\r\n            newProductProperties[propName] = value;\r\n            return newProductProperties;\r\n        });\r\n    }\r\n\r\n    const propertiesToFill = [];\r\n    if(categories.length > 0 && category) {\r\n        let info = categories.find(({_id}) => _id === category)\r\n        propertiesToFill.push(...info.properties);\r\n        while(info?.parent?._id) {\r\n            const parent = categories.find(({_id}) => _id === info?.parent?._id);\r\n            propertiesToFill.push(...parent.properties);\r\n            info = parent;\r\n        }\r\n    }\r\n\r\n    return (\r\n            <form onSubmit={saveProduct}>\r\n                <label>Product Name</label>\r\n                <input type=\"text\" \r\n                    placeholder=\"Product name\" \r\n                    value={title} \r\n                    onChange={ev => setTitle(ev.target.value)}/>\r\n\r\n                <label>Category</label>\r\n                <select value={category} onChange={ev => setCategory(ev.target.value)}>\r\n                    <option>Uncategorized</option>\r\n                    {categories.length > 0 && categories.map(c => (\r\n                        <option key={categories._id} value={c._id}> {c.name} </option>\r\n                    ))}\r\n                </select>\r\n                \r\n                {propertiesToFill.length > 0 && propertiesToFill.map(p => (\r\n                    <div key={propertiesToFill._id} className=\"flex gap-1\">\r\n                        <div>{p.name}</div>\r\n                        <select value={productProperties[p.name]} onChange={ev => setProductProperty(p.name, ev.target.value)}>\r\n                            {p.values.map(v => (\r\n                                <option key={values._id} value={v}>{v}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n                ))}\r\n\r\n                <label>Photos</label>\r\n                <div className=\"mb-2 flex flex-wrap gap-1\">\r\n                    <ReactSortable className=\"flex flex-wrap gap-1\"\r\n                        list={images} setList={updateImagesOrder}>\r\n                        {!!images?.length && images.map(link => (\r\n                        <div key={link} className=\"h-24\">\r\n                            <img src={link} alt=\"\" className=\"rounded-lg\"/>\r\n                        </div>\r\n                        ))}  \r\n                    </ReactSortable>\r\n \r\n                    <label className=\"w-24 h-24 cursor-pointer border text-center flex flex-col items-center justify-center rounded-lg bg-gray-200\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-6 h-6\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 8.25H7.5a2.25 2.25 0 00-2.25 2.25v9a2.25 2.25 0 002.25 2.25h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25H15m0-3l-3-3m0 0l-3 3m3-3V15\" />\r\n                        </svg>\r\n                        <div>\r\n                            Upload\r\n                        </div>\r\n                        <input type=\"file\" onChange={uploadImages} className=\"hidden\"></input>\r\n                    </label>\r\n                </div>\r\n\r\n                <label>Description</label>\r\n                <textarea placeholder=\"description\"\r\n                    value={description}\r\n                    onChange={ev => setDescription(ev.target.value)}>\r\n                </textarea>\r\n\r\n                <label>Price (CAD)</label>\r\n                <input type=\"text\" \r\n                    placeholder=\"Price\"\r\n                    value={price}\r\n                    onChange={ev => setPrice(ev.target.value)}/>\r\n\r\n                <button type=\"submit\" className='btn-primary'>\r\n                    Save\r\n                </button>\r\n            </form>\r\n    )\r\n}","C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\lib\\mongodb.js",[],[],"C:\\Users\\valer\\Desktop\\ecommerce\\ecommerce-store\\ecommerce-admin\\lib\\mongoose.js",[],[],{"ruleId":"104","severity":1,"message":"105","line":13,"column":9,"nodeType":"106","endLine":13,"endColumn":69},{"ruleId":"107","severity":1,"message":"108","line":30,"column":33,"nodeType":"106","endLine":30,"endColumn":78},{"ruleId":"107","severity":1,"message":"108","line":36,"column":33,"nodeType":"106","endLine":36,"endColumn":80},{"ruleId":"107","severity":1,"message":"108","line":18,"column":13,"nodeType":"106","endLine":18,"endColumn":63},{"ruleId":"107","severity":1,"message":"108","line":27,"column":16,"nodeType":"106","endLine":27,"endColumn":89},{"ruleId":"107","severity":1,"message":"108","line":33,"column":17,"nodeType":"106","endLine":33,"endColumn":113},{"ruleId":"107","severity":1,"message":"108","line":39,"column":17,"nodeType":"106","endLine":39,"endColumn":117},{"ruleId":"107","severity":1,"message":"108","line":45,"column":17,"nodeType":"106","endLine":45,"endColumn":109},{"ruleId":"107","severity":1,"message":"108","line":51,"column":18,"nodeType":"106","endLine":51,"endColumn":113},{"ruleId":"104","severity":1,"message":"105","line":118,"column":29,"nodeType":"106","endLine":118,"endColumn":76},"@next/next/no-img-element","Do not use <img>. Use Image from 'next/image' instead. See https://nextjs.org/docs/messages/no-img-element.","JSXOpeningElement","@next/next/link-passhref","passHref is missing. See https://nextjs.org/docs/messages/link-passhref"]